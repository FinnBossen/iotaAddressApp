!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("big-integer")):"function"==typeof define&&define.amd?define(["exports","big-integer"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).IotaUtil={},e.bigInt)}(this,(function(e,t){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var s=r(t);class n{static byteLength(e){const t=n.getLengths(e);return n.calcByteLength(t[0],t[1])}static decode(e){let t;const r=n.getLengths(e),s=r[0],i=r[1],a=new Uint8Array(n.calcByteLength(s,i));let h=0;const o=i>0?s-4:s;let d;for(d=0;d<o;d+=4)t=n._REVERSE_LOOKUP[e.charCodeAt(d)]<<18|n._REVERSE_LOOKUP[e.charCodeAt(d+1)]<<12|n._REVERSE_LOOKUP[e.charCodeAt(d+2)]<<6|n._REVERSE_LOOKUP[e.charCodeAt(d+3)],a[h++]=t>>16&255,a[h++]=t>>8&255,a[h++]=255&t;return 2===i&&(t=n._REVERSE_LOOKUP[e.charCodeAt(d)]<<2|n._REVERSE_LOOKUP[e.charCodeAt(d+1)]>>4,a[h++]=255&t),1===i&&(t=n._REVERSE_LOOKUP[e.charCodeAt(d)]<<10|n._REVERSE_LOOKUP[e.charCodeAt(d+1)]<<4|n._REVERSE_LOOKUP[e.charCodeAt(d+2)]>>2,a[h++]=t>>8&255,a[h++]=255&t),a}static encode(e){let t;const r=e.length,s=r%3,i=[],a=16383;for(let t=0,h=r-s;t<h;t+=a)i.push(n.encodeChunk(e,t,t+a>h?h:t+a));return 1===s?(t=e[r-1],i.push(`${n._LOOKUP[t>>2]+n._LOOKUP[t<<4&63]}==`)):2===s&&(t=(e[r-2]<<8)+e[r-1],i.push(`${n._LOOKUP[t>>10]+n._LOOKUP[t>>4&63]+n._LOOKUP[t<<2&63]}=`)),i.join("")}static calcByteLength(e,t){return 3*(e+t)/4-t}static getLengths(e){const t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");let r=e.indexOf("=");-1===r&&(r=t);return[r,r===t?0:4-r%4]}static tripletToBase64(e){return n._LOOKUP[e>>18&63]+n._LOOKUP[e>>12&63]+n._LOOKUP[e>>6&63]+n._LOOKUP[63&e]}static encodeChunk(e,t,r){let s;const i=[];for(let a=t;a<r;a+=3)s=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(n.tripletToBase64(s));return i.join("")}}n._LOOKUP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n._REVERSE_LOOKUP={43:62,45:62,47:63,48:52,49:53,50:54,51:55,52:56,53:57,54:58,55:59,56:60,57:61,65:0,66:1,67:2,68:3,69:4,70:5,71:6,72:7,73:8,74:9,75:10,76:11,77:12,78:13,79:14,80:15,81:16,82:17,83:18,84:19,85:20,86:21,87:22,88:23,89:24,90:25,95:63,97:26,98:27,99:28,100:29,101:30,102:31,103:32,104:33,105:34,106:35,107:36,108:37,109:38,110:39,111:40,112:41,113:42,114:43,115:44,116:45,117:46,118:47,119:48,120:49,121:50,122:51};class i{}i.isNodeJs=!1;class a{static generate(e){{const t=new Uint8Array(e);return window.crypto.getRandomValues(t),t}}}class h{static read3(e,t){const r=e[t+0]+(e[t+1]<<8)+(e[t+2]<<16)>>>0;return s.default(r)}static read4(e,t){const r=e[t+0]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24)>>>0;return s.default(r)}static read8(e,t){const r=e[t+0]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24)>>>0,n=e[t+4]+(e[t+5]<<8)+(e[t+6]<<16)+(e[t+7]<<24)>>>0;return s.default(n).shiftLeft(h.BIG_32).or(r)}static write8(e,t,r){const s=Number(e.and(h.BIG_32_MASK)),n=Number(e.shiftRight(h.BIG_32).and(h.BIG_32_MASK));t[r]=255&s,t[r+1]=s>>8&255,t[r+2]=s>>16&255,t[r+3]=s>>24&255,t[r+4]=255&n,t[r+5]=n>>8&255,t[r+6]=n>>16&255,t[r+7]=n>>24&255}static random(){return h.read8(a.generate(8),0)}}h.BIG_32=s.default(32),h.BIG_32_MASK=s.default(4294967295);class o{static bytesToUtf8(e,t,r){const s=null!=t?t:0,n=null!=r?r:e.length;let i="";for(let t=s;t<s+n;t++){const r=e[t];if(r<128)i+=String.fromCharCode(r);else if(r>191&&r<224)i+=String.fromCharCode((31&r)<<6|63&e[t+1]),t+=1;else if(r>223&&r<240)i+=String.fromCharCode((15&r)<<12|(63&e[t+1])<<6|63&e[t+2]),t+=2;else{const s=((7&r)<<18|(63&e[t+1])<<12|(63&e[t+2])<<6|63&e[t+3])-65536;i+=String.fromCharCode(s>>10|55296,1023&s|56320),t+=3}}return i}static utf8ToBytes(e){const t=[];for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t.push(s):s<2048?t.push(192|s>>6,128|63&s):s<55296||s>=57344?t.push(224|s>>12,128|s>>6&63,128|63&s):(r++,s=65536+((1023&s)<<10|1023&e.charCodeAt(r)),t.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|63&s))}return Uint8Array.from(t)}static bytesToHex(e,t,r,s){let n="";if(this.buildHexLookups(),o.ENCODE_LOOKUP){const i=null!=r?r:e.length,a=null!=t?t:0;if(s)for(let t=0;t<i;t++)n=o.ENCODE_LOOKUP[e[a+t]]+n;else for(let t=0;t<i;t++)n+=o.ENCODE_LOOKUP[e[a+t]]}return n}static hexToBytes(e,t){const r=e.length>>1,s=r<<1,n=new Uint8Array(r);if(this.buildHexLookups(),o.DECODE_LOOKUP){let r=0,i=0;for(;r<s;)n[i++]=o.DECODE_LOOKUP[e.charCodeAt(r++)]<<4|o.DECODE_LOOKUP[e.charCodeAt(r++)];t&&n.reverse()}return n}static utf8ToHex(e){return o.bytesToHex(o.utf8ToBytes(e))}static hexToUtf8(e){return o.bytesToUtf8(o.hexToBytes(e))}static isHex(e){return e.length%2!=1&&/^[\da-f]+$/g.test(e)}static bytesToBinary(e){const t=[];for(let r=0;r<e.length;r++)t.push(e[r].toString(2).padStart(8,"0"));return t.join("")}static binaryToBytes(e){const t=new Uint8Array(Math.ceil(e.length/8));for(let r=0;r<t.length;r++)t[r]=Number.parseInt(e.slice(8*r,8*(r+1)),2);return t}static bytesToBase64(e){return n.encode(e)}static base64ToBytes(e){return n.decode(e)}static buildHexLookups(){if(!o.ENCODE_LOOKUP||!o.DECODE_LOOKUP){const e="0123456789abcdef";o.ENCODE_LOOKUP=[],o.DECODE_LOOKUP=[];for(let t=0;t<256;t++)o.ENCODE_LOOKUP[t]=e[t>>4&15]+e[15&t],t<16&&(t<10?o.DECODE_LOOKUP[48+t]=t:o.DECODE_LOOKUP[87+t]=t)}}}class d{constructor(){this._storage=new Uint8Array(d.CHUNK_SIZE),this._writeIndex=0}length(){return this._storage.length}unused(){return this._storage.length-this._writeIndex}finalBytes(){return this._storage.subarray(0,this._writeIndex)}finalHex(){return o.bytesToHex(this._storage.subarray(0,this._writeIndex))}getWriteIndex(){return this._writeIndex}setWriteIndex(e){if(this._writeIndex=e,e>=this._storage.length)throw new Error(`You cannot set the writeIndex to ${e} as the stream is only ${this._storage.length} in length`)}writeFixedHex(e,t,r){if(!o.isHex(r))throw new Error(`The ${e} should be in hex format`);if(2*t!==r.length)throw new Error(`${e} length ${r.length} does not match expected length ${2*t}`);this.expand(t),this._storage.set(o.hexToBytes(r),this._writeIndex),this._writeIndex+=t}writeBytes(e,t,r){this.expand(t),this._storage.set(r,this._writeIndex),this._writeIndex+=t}writeByte(e,t){this.expand(1),this._storage[this._writeIndex++]=255&t}writeUInt16(e,t){this.expand(2),this._storage[this._writeIndex++]=255&t,this._storage[this._writeIndex++]=t>>>8}writeUInt32(e,t){this.expand(4),this._storage[this._writeIndex++]=255&t,this._storage[this._writeIndex++]=t>>>8,this._storage[this._writeIndex++]=t>>>16,this._storage[this._writeIndex++]=t>>>24}writeUInt64(e,t){this.expand(8),h.write8(t,this._storage,this._writeIndex),this._writeIndex+=8}writeBoolean(e,t){this.expand(1),this._storage[this._writeIndex++]=t?1:0}expand(e){if(this._writeIndex+e>this._storage.byteLength){const t=new Uint8Array(this._storage.length+Math.ceil(e/d.CHUNK_SIZE)*d.CHUNK_SIZE);t.set(this._storage,0),this._storage=t}}}d.CHUNK_SIZE=4096,e.Base64=n,e.BigIntHelper=h,e.Converter=o,e.PlatformHelper=i,e.RandomHelper=a,e.ReadStream=class{constructor(e,t=0){this._storage=new Uint8Array(e),this._readIndex=t}length(){return this._storage.byteLength}hasRemaining(e){return this._readIndex+e<=this._storage.byteLength}unused(){return this._storage.byteLength-this._readIndex}getReadIndex(){return this._readIndex}setReadIndex(e){if(this._readIndex=e,e>=this._storage.length)throw new Error(`You cannot set the readIndex to ${e} as the stream is only ${this._storage.length} in length`)}readFixedHex(e,t,r=!0){if(!this.hasRemaining(t))throw new Error(`${e} length ${t} exceeds the remaining data ${this.unused()}`);const s=o.bytesToHex(this._storage,this._readIndex,t);return r&&(this._readIndex+=t),s}readBytes(e,t,r=!0){if(!this.hasRemaining(t))throw new Error(`${e} length ${t} exceeds the remaining data ${this.unused()}`);const s=this._storage.slice(this._readIndex,this._readIndex+t);return r&&(this._readIndex+=t),s}readByte(e,t=!0){if(!this.hasRemaining(1))throw new Error(`${e} length 1 exceeds the remaining data ${this.unused()}`);const r=this._storage[this._readIndex];return t&&(this._readIndex+=1),r}readUInt16(e,t=!0){if(!this.hasRemaining(2))throw new Error(`${e} length 2 exceeds the remaining data ${this.unused()}`);const r=this._storage[this._readIndex]|this._storage[this._readIndex+1]<<8;return t&&(this._readIndex+=2),r}readUInt32(e,t=!0){if(!this.hasRemaining(4))throw new Error(`${e} length 4 exceeds the remaining data ${this.unused()}`);const r=this._storage[this._readIndex]|256*this._storage[this._readIndex+1]|65536*this._storage[this._readIndex+2]+16777216*this._storage[this._readIndex+3];return t&&(this._readIndex+=4),r}readUInt64(e,t=!0){if(!this.hasRemaining(8))throw new Error(`${e} length 8 exceeds the remaining data ${this.unused()}`);const r=h.read8(this._storage,this._readIndex);return t&&(this._readIndex+=8),r}readBoolean(e,t=!0){if(!this.hasRemaining(1))throw new Error(`${e} length 1 exceeds the remaining data ${this.unused()}`);const r=this._storage[this._readIndex];return t&&(this._readIndex+=1),0!==r}},e.WriteStream=d,Object.defineProperty(e,"__esModule",{value:!0})}));